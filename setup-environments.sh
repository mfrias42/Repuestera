#!/bin/bash

# GuÃ­a para configurar Environments en Azure DevOps
# TP05 - Repuestera - GestiÃ³n de Aprobaciones

echo "ğŸš€ ConfiguraciÃ³n de Environments para Repuestera"
echo "================================================"
echo ""
echo "âš ï¸  NOTA: Los environments deben crearse manualmente en Azure DevOps"
echo "    El CLI no soporta la creaciÃ³n de environments actualmente."
echo ""

# Variables del proyecto
PROJECT_NAME="tp05"
ORGANIZATION="mfrias42"
URL="https://dev.azure.com/$ORGANIZATION/$PROJECT_NAME/_environments"

echo "ğŸ”— URL del proyecto: $URL"
echo ""
echo "ğŸ“‹ PASOS MANUALES REQUERIDOS:"
echo "================================"
echo ""
echo "1ï¸âƒ£  Accede a Azure DevOps:"
echo "   $URL"
echo ""
echo "2ï¸âƒ£  Crea los siguientes Environments:"
echo ""
echo "   ğŸ“¦ QA ENVIRONMENTS (Sin aprobaciÃ³n):"
echo "   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "   â€¢ Nombre: qa-backend"
echo "   â€¢ DescripciÃ³n: Backend QA Environment - Auto Deploy"
echo "   â€¢ Aprobaciones: Ninguna"
echo ""
echo "   â€¢ Nombre: qa-frontend"
echo "   â€¢ DescripciÃ³n: Frontend QA Environment - Auto Deploy"
echo "   â€¢ Aprobaciones: Ninguna"
echo ""
echo "   ğŸ” PRODUCTION ENVIRONMENTS (Con aprobaciÃ³n):"
echo "   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "   â€¢ Nombre: production-backend"
echo "   â€¢ DescripciÃ³n: Backend Production Environment - Manual Approval Required"
echo "   â€¢ Aprobaciones: âœ… CONFIGURAR (Ver paso 3)"
echo ""
echo "   â€¢ Nombre: production-frontend"
echo "   â€¢ DescripciÃ³n: Frontend Production Environment - Manual Approval Required"
echo "   â€¢ Aprobaciones: âœ… CONFIGURAR (Ver paso 3)"
echo ""
echo "3ï¸âƒ£  Configurar Aprobaciones para Production:"
echo "   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "   Para cada Production Environment:"
echo "   a) Clic en el environment"
echo "   b) Ve a 'Approvals and checks'"
echo "   c) Clic en '+' â†’ 'Approvals'"
echo "   d) Agrega approvers:"
echo "      - mfrias42@dev.azure.com (Principal)"
echo "      - [Otros segÃºn necesidad]"
echo "   e) ConfiguraciÃ³n recomendada:"
echo "      - Minimum approvers: 1"
echo "      - Allow requestor to approve: No"
echo "      - Timeout: 30 days"
echo ""
echo "4ï¸âƒ£  Verificar configuraciÃ³n:"
echo "   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "   â€¢ QA environments: Sin checks"
echo "   â€¢ Production environments: Con approval check"
echo ""
echo "âœ… Una vez completado, el pipeline estarÃ¡ listo para:"
echo "   â€¢ Deploy automÃ¡tico a QA"
echo "   â€¢ Deploy con aprobaciÃ³n manual a Production"
echo ""
echo "ğŸ“– DocumentaciÃ³n completa en:"
echo "   â€¢ APPROVAL_PROCESS.md"
echo "   â€¢ MANUAL_APPROVALS_SETUP.md"